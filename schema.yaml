openapi: 3.0.3
info:
  title: Restaurant API
  version: 1.0.0
  description: |-
    Professional Restaurant Delivery API

    • JWT Authentication
    • API Key access (TMDB-style)
    • Rate limited & production ready
    • Flutter-ready backend
paths:
  /api/v1/addresses/:
    get:
      operationId: v1_addresses_list
      description: Get all user addresses or create a new one.
      summary: List and create addresses
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - Addresses
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedAddressList'
          description: ''
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedAddressList'
          description: Address created
        '401':
          description: Authentication credentials were not provided.
    post:
      operationId: v1_addresses_create
      description: Get all user addresses or create a new one.
      summary: List and create addresses
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - Addresses
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Address'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Address'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Address'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedAddressList'
          description: ''
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
          description: Address created
        '401':
          description: Authentication credentials were not provided.
  /api/v1/addresses/{id}/:
    get:
      operationId: v1_addresses_retrieve
      description: Retrieve, update, or delete a specific address.
      summary: Get, update, or delete address
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Addresses
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
          description: ''
        '204':
          description: Address deleted
        '401':
          description: Authentication credentials were not provided.
        '404':
          description: Address not found
    put:
      operationId: v1_addresses_update
      description: Retrieve, update, or delete a specific address.
      summary: Get, update, or delete address
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Addresses
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Address'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Address'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Address'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
          description: ''
        '204':
          description: Address deleted
        '401':
          description: Authentication credentials were not provided.
        '404':
          description: Address not found
    patch:
      operationId: v1_addresses_partial_update
      description: Retrieve, update, or delete a specific address.
      summary: Get, update, or delete address
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Addresses
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedAddress'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedAddress'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedAddress'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
          description: ''
        '204':
          description: Address deleted
        '401':
          description: Authentication credentials were not provided.
        '404':
          description: Address not found
    delete:
      operationId: v1_addresses_destroy
      description: Retrieve, update, or delete a specific address.
      summary: Get, update, or delete address
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Addresses
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
          description: ''
        '204':
          description: Address deleted
        '401':
          description: Authentication credentials were not provided.
        '404':
          description: Address not found
  /api/v1/analytics/anomalies/detect/:
    get:
      operationId: v1_analytics_anomalies_detect_retrieve
      description: Detect unusual patterns in restaurant operations including revenue
        drops/spikes, coupon abuse, and order anomalies. Returns prioritized list
        of detected anomalies with explanations. Admin only.
      summary: Detect Operational Anomalies
      parameters:
      - in: query
        name: days
        schema:
          type: integer
        description: 'Period to analyze (default: 7)'
      - in: query
        name: use_ai
        schema:
          type: boolean
        description: Use AI for explanations (requires Claude API key)
      tags:
      - Anomaly Detection
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/v1/analytics/anomalies/digest/:
    get:
      operationId: v1_analytics_anomalies_digest_retrieve
      description: Get a formatted daily digest of anomalies suitable for email notifications
        or dashboard alerts. Admin only.
      summary: Get Daily Anomaly Digest
      tags:
      - Anomaly Detection
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/v1/analytics/anomalies/summary/:
    get:
      operationId: v1_analytics_anomalies_summary_retrieve
      description: Get a high-level summary of detected anomalies including counts
        by severity (critical/warning/info) and type. Admin only.
      summary: Get Anomaly Summary
      parameters:
      - in: query
        name: days
        schema:
          type: integer
        description: 'Period to analyze (default: 7)'
      tags:
      - Anomaly Detection
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/v1/analytics/coupons/performance/:
    get:
      operationId: v1_analytics_coupons_performance_retrieve
      description: Retrieve coupon usage statistics and discounts. Admin only.
      summary: Get Coupon Performance
      tags:
      - Analytics
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CouponPerformance'
          description: ''
  /api/v1/analytics/dashboard/:
    get:
      operationId: v1_analytics_dashboard_retrieve
      description: Retrieve comprehensive KPIs for the analytics dashboard. Admin
        only.
      summary: Get Dashboard KPIs
      parameters:
      - in: query
        name: days
        schema:
          type: integer
        description: 'Number of days to look back (default: 30)'
      tags:
      - Analytics
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DashboardKPIs'
          description: ''
  /api/v1/analytics/insights/business/:
    get:
      operationId: v1_analytics_insights_business_retrieve
      description: Get comprehensive AI-generated business insights including opportunities,
        warnings, and actionable recommendations. Admin only.
      summary: Get Business Insights
      parameters:
      - in: query
        name: days
        schema:
          type: integer
        description: 'Period to analyze (default: 30)'
      tags:
      - AI Insights
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessInsights'
          description: ''
  /api/v1/analytics/insights/explain/:
    get:
      operationId: v1_analytics_insights_explain_retrieve
      description: Get AI-generated explanation for why a metric changed. Provides
        natural language 'why' explanations. Admin only.
      summary: Explain Metric Change
      parameters:
      - in: query
        name: days
        schema:
          type: integer
        description: 'Period to analyze (default: 30)'
      - in: query
        name: metric
        schema:
          type: string
        description: Metric to explain (revenue, orders, users)
        required: true
      tags:
      - AI Insights
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MetricExplanation'
          description: ''
  /api/v1/analytics/insights/today/:
    get:
      operationId: v1_analytics_insights_today_retrieve
      description: Get AI-generated natural language summary of today's performance.
        Admin only.
      summary: What Happened Today?
      parameters:
      - in: query
        name: date
        schema:
          type: string
          format: date
        description: 'Date to summarize (YYYY-MM-DD). Default: today'
      tags:
      - AI Insights
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DailySummary'
          description: ''
  /api/v1/analytics/orders/status/:
    get:
      operationId: v1_analytics_orders_status_retrieve
      description: Retrieve order counts by status. Admin only.
      summary: Get Order Status Breakdown
      tags:
      - Analytics
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderStatusBreakdown'
          description: ''
  /api/v1/analytics/predictions/inventory-risks/:
    get:
      operationId: v1_analytics_predictions_inventory_risks_retrieve
      description: Predict inventory stock-out risks based on current levels and consumption
        patterns. Admin only.
      summary: Predict Inventory Risks
      parameters:
      - in: query
        name: days_ahead
        schema:
          type: integer
        description: 'Number of days to forecast (default: 7)'
      tags:
      - Predictions
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/v1/analytics/predictions/promo-times/:
    get:
      operationId: v1_analytics_predictions_promo_times_retrieve
      description: Analyze historical patterns to recommend the best days for running
        promotions. Admin only.
      summary: Predict Best Promotion Times
      parameters:
      - in: query
        name: days_ahead
        schema:
          type: integer
        description: 'Number of days to forecast (default: 7)'
      tags:
      - Predictions
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/v1/analytics/predictions/summary/:
    get:
      operationId: v1_analytics_predictions_summary_retrieve
      description: Get a comprehensive summary of all predictions including tomorrow's
        forecast, promo recommendations, and inventory risks. Admin only.
      summary: Get Prediction Summary
      tags:
      - Predictions
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/v1/analytics/predictions/tomorrow/:
    get:
      operationId: v1_analytics_predictions_tomorrow_retrieve
      description: Predict tomorrow's order volume and revenue based on historical
        patterns and recent trends. Admin only.
      summary: Predict Tomorrow's Orders
      tags:
      - Predictions
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /api/v1/analytics/products/performance/:
    get:
      operationId: v1_analytics_products_performance_list
      description: Retrieve top selling products and their metrics. Admin only.
      summary: Get Product Performance
      tags:
      - Analytics
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProductPerformance'
          description: ''
  /api/v1/analytics/revenue/daily/:
    get:
      operationId: v1_analytics_revenue_daily_list
      description: Retrieve daily revenue breakdown for charting. Admin only.
      summary: Get Daily Revenue
      parameters:
      - in: query
        name: end_date
        schema:
          type: string
          format: date
        description: 'End date (YYYY-MM-DD). Default: today'
      - in: query
        name: start_date
        schema:
          type: string
          format: date
        description: 'Start date (YYYY-MM-DD). Default: 30 days ago'
      tags:
      - Analytics
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DailyRevenue'
          description: ''
  /api/v1/analytics/revenue/metrics/:
    get:
      operationId: v1_analytics_revenue_metrics_retrieve
      description: Retrieve revenue metrics including total revenue, orders, and averages.
        Admin only.
      summary: Get Revenue Metrics
      parameters:
      - in: query
        name: end_date
        schema:
          type: string
          format: date
        description: 'End date (YYYY-MM-DD). Default: today'
      - in: query
        name: start_date
        schema:
          type: string
          format: date
        description: 'Start date (YYYY-MM-DD). Default: 30 days ago'
      tags:
      - Analytics
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RevenueMetrics'
          description: ''
  /api/v1/analytics/reviews/metrics/:
    get:
      operationId: v1_analytics_reviews_metrics_retrieve
      description: Retrieve review statistics and rating distribution. Admin only.
      summary: Get Review Metrics
      tags:
      - Analytics
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewMetrics'
          description: ''
  /api/v1/analytics/users/metrics/:
    get:
      operationId: v1_analytics_users_metrics_retrieve
      description: Retrieve user statistics and top customers. Admin only.
      summary: Get User Metrics
      tags:
      - Analytics
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserMetrics'
          description: ''
  /api/v1/auth/forgot-password:
    post:
      operationId: v1_auth_forgot_password_create
      description: |-
        Step 1: Request password reset.
        Sends a 6-digit OTP to the user's email.

        Note: In production, send OTP via email service.
        For development, OTP is returned in the response.
      tags:
      - Password Reset
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForgotPassword'
            examples:
              ForgotPasswordRequest:
                value:
                  email: john@example.com
                summary: Forgot Password Request
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ForgotPassword'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ForgotPassword'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          description: OTP sent to email
        '400':
          description: Email not found
  /api/v1/auth/google:
    post:
      operationId: v1_auth_google_create
      description: |-
        Authenticate with Google OAuth.

        Send the Google ID token from the frontend Google Sign-In.
        Returns JWT access and refresh tokens.

        **Flow:**
        1. Frontend uses Google Sign-In to get ID token
        2. Frontend sends ID token to this endpoint
        3. Backend verifies token with Google
        4. Backend creates/updates user account
        5. Backend returns JWT tokens for authentication
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GoogleAuth'
            examples:
              GoogleAuthRequest:
                value:
                  id_token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjE4MmU0M2NkZGY2N...
                summary: Google Auth Request
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/GoogleAuth'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/GoogleAuth'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          description: JWT token pair
        '400':
          description: Invalid Google token
  /api/v1/auth/login:
    post:
      operationId: v1_auth_login_create
      description: |-
        Login with email (or username) and password.
        Returns JWT access and refresh tokens.
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Login'
            examples:
              LoginWithEmail:
                value:
                  email: john@example.com
                  password: SecurePass123!
                summary: Login with Email
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Login'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Login'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          description: JWT token pair
        '401':
          description: Invalid credentials
  /api/v1/auth/refresh:
    post:
      operationId: v1_auth_refresh_create
      description: Refresh access token using refresh token.
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefresh'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefresh'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefresh'
        required: true
      security:
      - BearerAuth: []
      - {}
      responses:
        '200':
          description: New access token
        '401':
          description: Invalid or expired refresh token
  /api/v1/auth/register:
    post:
      operationId: v1_auth_register_create
      description: |-
        Register a new user account with email and password.
        Username is auto-generated from email if not provided.
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Register'
            examples:
              RegisterRequest:
                value:
                  email: john@example.com
                  password: SecurePass123!
                summary: Register Request
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Register'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Register'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
        '400':
          description: Validation error
  /api/v1/auth/reset-password:
    post:
      operationId: v1_auth_reset_password_create
      description: |-
        Step 3: Reset password.
        Updates user password after OTP verification.
      tags:
      - Password Reset
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPassword'
            examples:
              ResetPasswordRequest:
                value:
                  email: john@example.com
                  otp: '123456'
                  new_password: NewSecurePass123!
                  confirm_password: NewSecurePass123!
                summary: Reset Password Request
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ResetPassword'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ResetPassword'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          description: Password reset successful
        '400':
          description: Validation error
  /api/v1/auth/verify-otp:
    post:
      operationId: v1_auth_verify_otp_create
      description: |-
        Step 2: Verify OTP code.
        Validates the 6-digit code sent to the user's email.
      tags:
      - Password Reset
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyOTP'
            examples:
              VerifyOTPRequest:
                value:
                  email: john@example.com
                  otp: '123456'
                summary: Verify OTP Request
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/VerifyOTP'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/VerifyOTP'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          description: OTP verified successfully
        '400':
          description: Invalid or expired OTP
  /api/v1/cart/:
    get:
      operationId: v1_cart_retrieve
      description: Authenticated endpoint. Returns the current user's cart.
      summary: Get user cart
      tags:
      - Cart
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
              examples:
                CartResponse:
                  value:
                    id: 1
                    items:
                    - id: 5
                      product_id: 10
                      name: Classic Burger
                      price: '12.50'
                      quantity: 2
                      subtotal: '25.00'
                    total_items: 2
                    total_price: '25.00'
                  summary: Cart Response
          description: ''
        '401':
          description: Authentication credentials were not provided.
  /api/v1/cart/add/:
    post:
      operationId: v1_cart_add_create
      description: Authenticated endpoint. Adds a product to the user's cart.
      summary: Add product to cart
      tags:
      - Cart
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddToCartRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AddToCartRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AddToCartRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
              examples:
                AddItemResponse:
                  value:
                    message: Item added to cart
                    cart:
                      id: 1
                      items:
                      - id: 5
                        product_id: 10
                        name: Classic Burger
                        price: '12.50'
                        quantity: 2
                        subtotal: '25.00'
                      total_items: 2
                      total_price: '25.00'
                  summary: Add Item Response
          description: Item added to cart
        '401':
          description: Authentication credentials were not provided.
        '404':
          description: Product not found
  /api/v1/cart/item/{item_id}/:
    delete:
      operationId: v1_cart_item_destroy
      description: Authenticated endpoint. Removes an item from the user's cart.
      summary: Remove item from cart
      parameters:
      - in: path
        name: item_id
        schema:
          type: integer
        description: Cart item ID
        required: true
      tags:
      - Cart
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
              examples:
                RemoveItemResponse:
                  value:
                    message: Item removed from cart
                    cart:
                      id: 1
                      items: []
                      total_items: 0
                      total_price: '0.00'
                  summary: Remove Item Response
          description: Item removed
        '401':
          description: Authentication credentials were not provided.
        '404':
          description: Item not found
  /api/v1/categories/:
    get:
      operationId: v1_categories_list
      description: Public endpoint. Returns all active menu categories.
      summary: List menu categories
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - Menu
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCategoryList'
              examples:
                CategoriesResponse:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - - id: 1
                        name: Burgers
                        image: null
                        is_active: true
                      - id: 2
                        name: Drinks
                        image: null
                        is_active: true
                  summary: Categories Response
          description: ''
        '401':
          description: Invalid or missing API key / token
  /api/v1/coupons/:
    get:
      operationId: v1_coupons_list
      description: Get all active and valid coupons. Admins see all, users see public
        coupons.
      summary: List available coupons
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - Coupons
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCouponList'
          description: ''
        '401':
          description: Authentication credentials were not provided.
  /api/v1/coupons/{code}/:
    get:
      operationId: v1_coupons_retrieve
      description: Get details of a specific coupon by its code.
      summary: Get coupon by code
      parameters:
      - in: path
        name: code
        schema:
          type: string
        description: Coupon code
        required: true
      tags:
      - Coupons
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Coupon'
          description: ''
        '401':
          description: Authentication credentials were not provided.
        '404':
          description: Coupon not found
  /api/v1/coupons/my-usage/:
    get:
      operationId: v1_coupons_my_usage_list
      description: List all coupons used by the authenticated user.
      summary: Get my coupon usage history
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - Coupons
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCouponUsageList'
          description: ''
        '401':
          description: Authentication credentials were not provided.
  /api/v1/coupons/validate/:
    post:
      operationId: v1_coupons_validate_create
      description: Check if a coupon code is valid and calculate potential discount.
      summary: Validate coupon code
      tags:
      - Coupons
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CouponValidate'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CouponValidate'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CouponValidate'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          description: Coupon validated successfully
        '400':
          description: Invalid coupon
        '401':
          description: Authentication credentials were not provided.
        '404':
          description: Coupon not found
  /api/v1/orders/:
    get:
      operationId: v1_orders_list
      description: |-
        User API (JWT)
        Lists the authenticated user's orders (alias endpoint).
      summary: List my orders (alias)
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - Orders
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedOrderList'
          description: ''
        '401':
          description: Authentication credentials were not provided.
  /api/v1/orders/{id}/:
    get:
      operationId: v1_orders_retrieve
      description: |-
        User API (JWT)
        Retrieves a single order for the authenticated user.
      summary: Get order details
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Orders
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
          description: ''
        '401':
          description: Authentication credentials were not provided.
        '404':
          description: Order not found
  /api/v1/orders/{id}/status/:
    get:
      operationId: v1_orders_status_retrieve
      description: Returns the current status and updated_at for an order.
      summary: Get order status
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      - in: path
        name: pk
        schema:
          type: integer
        description: Order ID
        required: true
      tags:
      - Orders
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderStatusResponse'
              examples:
                OrderStatus:
                  value:
                    order_id: 12
                    status: on_the_way
                    updated_at: '2026-01-14T12:30:00Z'
                  summary: Order Status
          description: Order status
        '401':
          description: Authentication credentials were not provided.
        '404':
          description: Order not found
    patch:
      operationId: v1_orders_status_partial_update
      description: Admin-only endpoint. Updates order status.
      summary: Update order status (admin)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      - in: path
        name: pk
        schema:
          type: integer
        description: Order ID
        required: true
      tags:
      - Orders
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedOrderStatusUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedOrderStatusUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedOrderStatusUpdateRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          description: Status updated
        '400':
          description: Invalid status
        '401':
          description: Authentication credentials were not provided.
        '404':
          description: Order not found
  /api/v1/orders/create/:
    post:
      operationId: v1_orders_create_create
      description: Creates an order using the current user's cart items.
      summary: Create order from cart
      tags:
      - Orders
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          description: Order created
        '400':
          description: Cart is empty
        '401':
          description: Authentication credentials were not provided.
  /api/v1/products/:
    get:
      operationId: v1_products_list
      description: |
        Public endpoint. Returns available products with search and filtering.

        **Search & Filters:**
        - `search`: Search by product name or description
        - `category_id`: Filter by category
        - `min_price`: Minimum price filter
        - `max_price`: Maximum price filter
        - `sort_by`: Sort results (price_asc, price_desc, name, newest)
      summary: List available products
      parameters:
      - in: query
        name: category_id
        schema:
          type: integer
        description: Filter products by category id
      - in: query
        name: max_price
        schema:
          type: number
          format: double
        description: Maximum price filter
      - in: query
        name: min_price
        schema:
          type: number
          format: double
        description: Minimum price filter
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - in: query
        name: search
        schema:
          type: string
        description: Search products by name or description
      - in: query
        name: sort_by
        schema:
          type: string
        description: 'Sort by: price_asc, price_desc, name, newest (default)'
      tags:
      - Menu
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedProductList'
              examples:
                ProductsResponse:
                  value:
                    count: 123
                    next: http://api.example.org/accounts/?page=4
                    previous: http://api.example.org/accounts/?page=2
                    results:
                    - - id: 10
                        category_id: 1
                        name: Classic Burger
                        description: Grilled beef patty, cheddar, and lettuce.
                        price: '12.50'
                        image: https://cdn.example.com/burger.jpg
                        is_available: true
                  summary: Products Response
          description: ''
        '401':
          description: Invalid or missing API key / token
  /api/v1/products/{id}/:
    get:
      operationId: v1_products_retrieve
      description: Public endpoint. Returns details for a single available product.
      summary: Retrieve product details
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Menu
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
              examples:
                ProductDetailResponse:
                  value:
                    id: 10
                    category_id: 1
                    name: Classic Burger
                    description: Grilled beef patty, cheddar, and lettuce.
                    price: '12.50'
                    image: https://cdn.example.com/burger.jpg
                    is_available: true
                  summary: Product Detail Response
          description: ''
        '401':
          description: Invalid or missing API key / token
        '404':
          description: Product not found
  /api/v1/products/{product_id}/ratings/:
    get:
      operationId: v1_products_ratings_retrieve
      description: Get average rating and rating distribution for a product.
      summary: Get product rating statistics
      parameters:
      - in: path
        name: product_id
        schema:
          type: integer
        description: Product ID
        required: true
      tags:
      - Reviews
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductRatingStats'
              examples:
                RatingStats:
                  value:
                    average_rating: 4.25
                    total_reviews: 120
                    rating_distribution:
                      '5': 60
                      '4': 40
                      '3': 15
                      '2': 3
                      '1': 2
                      total: 120
                  summary: Rating Stats
          description: Product rating statistics
  /api/v1/profile:
    get:
      operationId: v1_profile_retrieve
      description: Get current authenticated user profile.
      tags:
      - User Profile
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
        '401':
          description: Authentication required
  /api/v1/reviews/:
    get:
      operationId: v1_reviews_list
      description: Get all approved reviews for a specific product with pagination.
      summary: List reviews for a product
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - in: query
        name: product_id
        schema:
          type: integer
        description: Product ID to filter reviews
        required: true
      - in: query
        name: rating
        schema:
          type: integer
        description: Filter by rating (1-5)
      tags:
      - Reviews
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedReviewList'
          description: ''
        '400':
          description: Product ID is required
  /api/v1/reviews/{id}/:
    get:
      operationId: v1_reviews_retrieve
      description: Manage a specific review. Only the review owner can update/delete
        within 7 days.
      summary: Get, update, or delete a review
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Reviews
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
        '204':
          description: Review deleted
        '400':
          description: Cannot edit after 7 days
        '401':
          description: Authentication credentials were not provided.
        '403':
          description: Not the review owner
        '404':
          description: Review not found
    put:
      operationId: v1_reviews_update
      description: Manage a specific review. Only the review owner can update/delete
        within 7 days.
      summary: Get, update, or delete a review
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Reviews
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewUpdate'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ReviewUpdate'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ReviewUpdate'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
        '204':
          description: Review deleted
        '400':
          description: Cannot edit after 7 days
        '401':
          description: Authentication credentials were not provided.
        '403':
          description: Not the review owner
        '404':
          description: Review not found
    patch:
      operationId: v1_reviews_partial_update
      description: Manage a specific review. Only the review owner can update/delete
        within 7 days.
      summary: Get, update, or delete a review
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Reviews
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedReviewUpdate'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedReviewUpdate'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedReviewUpdate'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
        '204':
          description: Review deleted
        '400':
          description: Cannot edit after 7 days
        '401':
          description: Authentication credentials were not provided.
        '403':
          description: Not the review owner
        '404':
          description: Review not found
    delete:
      operationId: v1_reviews_destroy
      description: Manage a specific review. Only the review owner can update/delete
        within 7 days.
      summary: Get, update, or delete a review
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Reviews
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
        '204':
          description: Review deleted
        '400':
          description: Cannot edit after 7 days
        '401':
          description: Authentication credentials were not provided.
        '403':
          description: Not the review owner
        '404':
          description: Review not found
  /api/v1/reviews/create/:
    post:
      operationId: v1_reviews_create_create
      description: Create a new review for a product. Users can only review each product
        once.
      summary: Create a review
      tags:
      - Reviews
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewCreate'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ReviewCreate'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ReviewCreate'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
        '400':
          description: Validation error or already reviewed
        '401':
          description: Authentication credentials were not provided.
  /api/v1/reviews/helpful/:
    post:
      operationId: v1_reviews_helpful_create
      description: Vote on whether a review was helpful. Users cannot vote on their
        own reviews.
      summary: Mark review as helpful/not helpful
      tags:
      - Reviews
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewHelpfulnessRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ReviewHelpfulnessRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ReviewHelpfulnessRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          description: Vote recorded
        '400':
          description: Already voted or voting on own review
        '401':
          description: Authentication credentials were not provided.
        '404':
          description: Review not found
  /api/v1/reviews/my/:
    get:
      operationId: v1_reviews_my_list
      description: Get all reviews created by the authenticated user.
      summary: List my reviews
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - Reviews
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedReviewList'
          description: ''
        '401':
          description: Authentication credentials were not provided.
components:
  schemas:
    AddToCartRequest:
      type: object
      properties:
        product_id:
          type: integer
        quantity:
          type: integer
          minimum: 1
          default: 1
      required:
      - product_id
    Address:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        label:
          type: string
          maxLength: 50
        city:
          type: string
          maxLength: 100
        street:
          type: string
          maxLength: 255
        building:
          type: string
          maxLength: 50
        lat:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,6})?$
        lng:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,6})?$
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - city
      - created_at
      - id
      - label
      - lat
      - lng
      - street
    AddressDetail:
      type: object
      description: Read-only serializer for displaying address details in orders.
      properties:
        id:
          type: integer
          readOnly: true
        label:
          type: string
          readOnly: true
        city:
          type: string
          readOnly: true
        street:
          type: string
          readOnly: true
        building:
          type: string
          readOnly: true
      required:
      - building
      - city
      - id
      - label
      - street
    BusinessInsights:
      type: object
      description: Serializer for comprehensive business insights.
      properties:
        period:
          type: string
        overview:
          type: string
        opportunities:
          type: array
          items:
            type: string
        warnings:
          type: array
          items:
            type: string
        recommendations:
          type: array
          items:
            type: string
        kpis:
          $ref: '#/components/schemas/DashboardKPIs'
      required:
      - kpis
      - opportunities
      - overview
      - period
      - recommendations
      - warnings
    Cart:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        items:
          type: array
          items:
            $ref: '#/components/schemas/CartItem'
        total_items:
          type: integer
          readOnly: true
        total_price:
          type: number
          format: double
          readOnly: true
      required:
      - id
      - items
      - total_items
      - total_price
    CartItem:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        product_id:
          type: integer
        name:
          type: string
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        quantity:
          type: integer
        subtotal:
          type: number
          format: double
          readOnly: true
      required:
      - id
      - name
      - price
      - product_id
      - subtotal
    Category:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          title: Category name
          maxLength: 100
        image:
          type: string
          format: uri
          nullable: true
          title: Category image
          maxLength: 200
        is_active:
          type: boolean
      required:
      - id
      - name
    Coupon:
      type: object
      description: Serializer for listing and retrieving coupons.
      properties:
        id:
          type: integer
          readOnly: true
        code:
          type: string
          description: Coupon code (e.g., SUMMER20, FIRST10)
          maxLength: 50
        description:
          type: string
          description: Internal description of the coupon
        discount_type:
          $ref: '#/components/schemas/DiscountTypeEnum'
        discount_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Percentage (1-100) or fixed amount
        discount_display:
          type: string
          readOnly: true
        minimum_order_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Minimum order amount to apply coupon
        maximum_discount_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          nullable: true
          description: Maximum discount amount (for percentage coupons)
        max_usage_per_user:
          type: integer
          minimum: 1
          description: Maximum uses per user
        valid_from:
          type: string
          format: date-time
          description: Coupon valid from this date/time
        valid_until:
          type: string
          format: date-time
          description: Coupon valid until this date/time
        is_active:
          type: boolean
          description: Whether coupon is active
        is_valid:
          type: boolean
          readOnly: true
        usage_info:
          type: object
          additionalProperties: {}
          readOnly: true
      required:
      - code
      - description
      - discount_display
      - discount_value
      - id
      - is_valid
      - usage_info
      - valid_from
      - valid_until
    CouponPerformance:
      type: object
      description: Serializer for coupon performance metrics.
      properties:
        total_discount_given:
          type: number
          format: double
        orders_with_coupons:
          type: integer
        by_coupon:
          type: array
          items:
            $ref: '#/components/schemas/CouponStats'
      required:
      - by_coupon
      - orders_with_coupons
      - total_discount_given
    CouponStats:
      type: object
      description: Serializer for individual coupon statistics.
      properties:
        coupon_code:
          type: string
        usage_count:
          type: integer
        total_discount:
          type: number
          format: double
        total_revenue:
          type: number
          format: double
      required:
      - coupon_code
      - total_discount
      - total_revenue
      - usage_count
    CouponUsage:
      type: object
      description: Serializer for coupon usage history.
      properties:
        id:
          type: integer
          readOnly: true
        coupon_code:
          type: string
          readOnly: true
        coupon_description:
          type: string
          readOnly: true
        order_id:
          type: integer
          readOnly: true
          description: Order ID where coupon was used
        order_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          description: Order amount before discount
        discount_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          description: Discount amount applied
        final_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          description: Order amount after discount
        used_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - coupon_code
      - coupon_description
      - discount_amount
      - final_amount
      - id
      - order_amount
      - order_id
      - used_at
    CouponValidate:
      type: object
      description: Serializer for validating coupon codes.
      properties:
        code:
          type: string
          description: Coupon code to validate
          maxLength: 50
        order_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Order amount before discount
      required:
      - code
      - order_amount
    CreateOrderRequest:
      type: object
      properties:
        address_id:
          type: integer
        coupon_code:
          type: string
      required:
      - address_id
    DailyMetrics:
      type: object
      description: Serializer for daily metrics.
      properties:
        revenue:
          type: number
          format: double
        orders:
          type: integer
        average_order_value:
          type: number
          format: double
      required:
      - average_order_value
      - orders
      - revenue
    DailyRevenue:
      type: object
      description: Serializer for daily revenue data.
      properties:
        date:
          type: string
        revenue:
          type: number
          format: double
        orders:
          type: integer
        average_order_value:
          type: number
          format: double
      required:
      - average_order_value
      - date
      - orders
      - revenue
    DailySummary:
      type: object
      description: Serializer for AI-generated daily summary.
      properties:
        date:
          type: string
        summary:
          type: string
        headline:
          type: string
        metrics:
          $ref: '#/components/schemas/DailyMetrics'
        changes:
          $ref: '#/components/schemas/MetricChanges'
        insights:
          type: array
          items:
            type: string
      required:
      - changes
      - date
      - headline
      - insights
      - metrics
      - summary
    DashboardKPIs:
      type: object
      description: Serializer for dashboard KPIs.
      properties:
        period_days:
          type: integer
        revenue:
          $ref: '#/components/schemas/RevenueData'
        orders:
          $ref: '#/components/schemas/OrderData'
        average_order_value:
          type: number
          format: double
        total_users:
          type: integer
        active_users:
          type: integer
        conversion_rate:
          type: number
          format: double
        order_status:
          type: array
          items:
            $ref: '#/components/schemas/OrderStatus'
      required:
      - active_users
      - average_order_value
      - conversion_rate
      - order_status
      - orders
      - period_days
      - revenue
      - total_users
    DiscountTypeEnum:
      enum:
      - percentage
      - fixed
      type: string
      description: |-
        * `percentage` - Percentage
        * `fixed` - Fixed Amount
    ForgotPassword:
      type: object
      description: 'Serializer for forgot password request - Step 1: Send OTP'
      properties:
        email:
          type: string
          format: email
      required:
      - email
    GoogleAuth:
      type: object
      description: |-
        Serializer for Google OAuth authentication.

        Validates Google ID token and returns user data.
        Uses GoogleOAuthService for token verification.
      properties:
        id_token:
          type: string
          writeOnly: true
      required:
      - id_token
    Login:
      type: object
      description: Serializer for user login - supports email or username
      properties:
        email:
          type: string
          description: Email or username
        password:
          type: string
          writeOnly: true
      required:
      - email
      - password
    MetricChanges:
      type: object
      description: Serializer for metric changes.
      properties:
        revenue_change:
          type: number
          format: double
        revenue_change_percentage:
          type: number
          format: double
        order_change:
          type: integer
        order_change_percentage:
          type: number
          format: double
      required:
      - order_change
      - order_change_percentage
      - revenue_change
      - revenue_change_percentage
    MetricExplanation:
      type: object
      description: Serializer for metric change explanation.
      properties:
        metric:
          type: string
        trend:
          type: string
        change:
          type: number
          format: double
        change_percentage:
          type: number
          format: double
        explanation:
          type: string
        contributing_factors:
          type: array
          items:
            type: string
        current_value:
          type: number
          format: double
        previous_value:
          type: number
          format: double
      required:
      - change
      - change_percentage
      - contributing_factors
      - current_value
      - explanation
      - metric
      - previous_value
      - trend
    Order:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        address:
          allOf:
          - $ref: '#/components/schemas/AddressDetail'
          readOnly: true
        status:
          $ref: '#/components/schemas/OrderStatusEnum'
        status_display:
          type: string
          readOnly: true
        subtotal:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          description: Order subtotal before discount
        discount_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          description: Discount applied from coupon
        coupon_code:
          type: string
          description: Coupon code used (if any)
          maxLength: 50
        total_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          description: Final price after discount
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        items:
          type: array
          items:
            $ref: '#/components/schemas/OrderItem'
          readOnly: true
        history:
          type: array
          items: {}
          readOnly: true
      required:
      - address
      - created_at
      - discount_amount
      - history
      - id
      - items
      - status_display
      - subtotal
      - total_price
      - updated_at
    OrderData:
      type: object
      description: Serializer for order data in KPIs.
      properties:
        current:
          type: integer
        previous:
          type: integer
        growth_percentage:
          type: number
          format: double
      required:
      - current
      - growth_percentage
      - previous
    OrderItem:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        product_id:
          type: integer
        product_name:
          type: string
          maxLength: 255
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        quantity:
          type: integer
        subtotal:
          type: number
          format: double
          readOnly: true
      required:
      - id
      - price
      - product_id
      - product_name
      - quantity
      - subtotal
    OrderStatus:
      type: object
      description: Serializer for order status breakdown.
      properties:
        status:
          type: string
        count:
          type: integer
        total_value:
          type: number
          format: double
      required:
      - count
      - status
      - total_value
    OrderStatusBreakdown:
      type: object
      description: Serializer for complete order status breakdown.
      properties:
        by_status:
          type: array
          items:
            $ref: '#/components/schemas/OrderStatus'
        total_orders:
          type: integer
      required:
      - by_status
      - total_orders
    OrderStatusEnum:
      enum:
      - pending
      - preparing
      - on_the_way
      - delivered
      - cancelled
      type: string
      description: |-
        * `pending` - Pending
        * `preparing` - Preparing
        * `on_the_way` - On the way
        * `delivered` - Delivered
        * `cancelled` - Cancelled
    OrderStatusResponse:
      type: object
      properties:
        order_id:
          type: integer
        status:
          $ref: '#/components/schemas/StatusD80Enum'
        updated_at:
          type: string
          format: date-time
      required:
      - order_id
      - status
      - updated_at
    PaginatedAddressList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Address'
    PaginatedCategoryList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Category'
    PaginatedCouponList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Coupon'
    PaginatedCouponUsageList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/CouponUsage'
    PaginatedOrderList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Order'
    PaginatedProductList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Product'
    PaginatedReviewList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Review'
    PatchedAddress:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        label:
          type: string
          maxLength: 50
        city:
          type: string
          maxLength: 100
        street:
          type: string
          maxLength: 255
        building:
          type: string
          maxLength: 50
        lat:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,6})?$
        lng:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,6})?$
        created_at:
          type: string
          format: date-time
          readOnly: true
    PatchedOrderStatusUpdateRequest:
      type: object
      properties:
        status:
          $ref: '#/components/schemas/StatusD80Enum'
    PatchedReviewUpdate:
      type: object
      description: Serializer for updating reviews.
      properties:
        rating:
          allOf:
          - $ref: '#/components/schemas/RatingEnum'
          description: |-
            Rating from 1 (Poor) to 5 (Excellent)

            * `1` - 1 - Poor
            * `2` - 2 - Fair
            * `3` - 3 - Good
            * `4` - 4 - Very Good
            * `5` - 5 - Excellent
          minimum: 1
          maximum: 5
        comment:
          type: string
          description: Optional review comment
    Product:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        category_id:
          type: integer
          readOnly: true
        name:
          type: string
          title: Product name
          maxLength: 100
        description:
          type: string
          title: Product description
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        image:
          type: string
          format: uri
          nullable: true
          title: Product image
          maxLength: 200
        is_available:
          type: boolean
      required:
      - category_id
      - id
      - name
      - price
    ProductPerformance:
      type: object
      description: Serializer for product performance data.
      properties:
        product_id:
          type: integer
        product_name:
          type: string
        total_quantity:
          type: integer
        total_revenue:
          type: number
          format: double
        order_count:
          type: integer
      required:
      - order_count
      - product_id
      - product_name
      - total_quantity
      - total_revenue
    ProductRatingStats:
      type: object
      description: Serializer for product rating statistics.
      properties:
        average_rating:
          type: string
          format: decimal
          pattern: ^-?\d{0,1}(?:\.\d{0,2})?$
          nullable: true
        total_reviews:
          type: integer
        rating_distribution:
          type: object
          additionalProperties:
            type: integer
      required:
      - average_rating
      - rating_distribution
      - total_reviews
    RatingDistribution:
      type: object
      description: Serializer for rating distribution.
      properties:
        rating:
          type: integer
        count:
          type: integer
      required:
      - count
      - rating
    RatingEnum:
      enum:
      - 1
      - 2
      - 3
      - 4
      - 5
      type: integer
      description: |-
        * `1` - 1 - Poor
        * `2` - 2 - Fair
        * `3` - 3 - Good
        * `4` - 4 - Very Good
        * `5` - 5 - Excellent
    Register:
      type: object
      description: Serializer for user registration - matches UI fields
      properties:
        id:
          type: integer
          readOnly: true
        username:
          type: string
        email:
          type: string
          format: email
        password:
          type: string
          writeOnly: true
        phone:
          type: string
          nullable: true
          maxLength: 15
        avatar:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        role:
          $ref: '#/components/schemas/RoleEnum'
      required:
      - email
      - id
      - password
    ResetPassword:
      type: object
      description: 'Serializer for password reset - Step 3: Set new password'
      properties:
        email:
          type: string
          format: email
        otp:
          type: string
          maxLength: 6
        new_password:
          type: string
          writeOnly: true
        confirm_password:
          type: string
          writeOnly: true
      required:
      - confirm_password
      - email
      - new_password
      - otp
    RevenueData:
      type: object
      description: Serializer for revenue data in KPIs.
      properties:
        current:
          type: number
          format: double
        previous:
          type: number
          format: double
        growth_percentage:
          type: number
          format: double
      required:
      - current
      - growth_percentage
      - previous
    RevenueMetrics:
      type: object
      description: Serializer for revenue metrics.
      properties:
        total_revenue:
          type: number
          format: double
        total_orders:
          type: integer
        average_order_value:
          type: number
          format: double
        total_discount:
          type: number
          format: double
        gross_revenue:
          type: number
          format: double
        period:
          type: object
          additionalProperties: {}
      required:
      - average_order_value
      - gross_revenue
      - period
      - total_discount
      - total_orders
      - total_revenue
    Review:
      type: object
      description: Serializer for listing and retrieving reviews.
      properties:
        id:
          type: integer
          readOnly: true
        user:
          type: integer
          readOnly: true
        username:
          type: string
          readOnly: true
        product_id:
          type: integer
          description: ID of the product being reviewed
        order_id:
          type: integer
          nullable: true
          description: Order ID where this product was purchased
        rating:
          allOf:
          - $ref: '#/components/schemas/RatingEnum'
          description: |-
            Rating from 1 (Poor) to 5 (Excellent)

            * `1` - 1 - Poor
            * `2` - 2 - Fair
            * `3` - 3 - Good
            * `4` - 4 - Very Good
            * `5` - 5 - Excellent
          minimum: 1
          maximum: 5
        rating_display:
          type: string
          readOnly: true
        comment:
          type: string
          description: Optional review comment
        is_verified_purchase:
          type: boolean
          readOnly: true
          description: Whether this review is from a verified purchase
        is_approved:
          type: boolean
          readOnly: true
          description: Admin approval status
        helpful_count:
          type: integer
          readOnly: true
        not_helpful_count:
          type: integer
          readOnly: true
        can_edit:
          type: boolean
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - can_edit
      - created_at
      - helpful_count
      - id
      - is_approved
      - is_verified_purchase
      - not_helpful_count
      - product_id
      - rating
      - rating_display
      - updated_at
      - user
      - username
    ReviewCreate:
      type: object
      description: Serializer for creating reviews.
      properties:
        product_id:
          type: integer
          description: ID of the product being reviewed
        order_id:
          type: integer
          nullable: true
          description: Order ID where this product was purchased
        rating:
          allOf:
          - $ref: '#/components/schemas/RatingEnum'
          description: |-
            Rating from 1 (Poor) to 5 (Excellent)

            * `1` - 1 - Poor
            * `2` - 2 - Fair
            * `3` - 3 - Good
            * `4` - 4 - Very Good
            * `5` - 5 - Excellent
          minimum: 1
          maximum: 5
        comment:
          type: string
          description: Optional review comment
      required:
      - product_id
      - rating
    ReviewHelpfulnessRequest:
      type: object
      properties:
        review_id:
          type: integer
        is_helpful:
          type: boolean
      required:
      - is_helpful
      - review_id
    ReviewMetrics:
      type: object
      description: Serializer for review metrics.
      properties:
        total_reviews:
          type: integer
        average_rating:
          type: number
          format: double
        rating_distribution:
          type: array
          items:
            $ref: '#/components/schemas/RatingDistribution'
      required:
      - average_rating
      - rating_distribution
      - total_reviews
    ReviewUpdate:
      type: object
      description: Serializer for updating reviews.
      properties:
        rating:
          allOf:
          - $ref: '#/components/schemas/RatingEnum'
          description: |-
            Rating from 1 (Poor) to 5 (Excellent)

            * `1` - 1 - Poor
            * `2` - 2 - Fair
            * `3` - 3 - Good
            * `4` - 4 - Very Good
            * `5` - 5 - Excellent
          minimum: 1
          maximum: 5
        comment:
          type: string
          description: Optional review comment
      required:
      - rating
    RoleEnum:
      enum:
      - customer
      - admin
      - restaurant
      type: string
      description: |-
        * `customer` - Customer
        * `admin` - Admin
        * `restaurant` - Restaurant
    StatusD80Enum:
      enum:
      - pending
      - preparing
      - on_the_way
      - delivered
      - cancelled
      type: string
      description: |-
        * `pending` - pending
        * `preparing` - preparing
        * `on_the_way` - on_the_way
        * `delivered` - delivered
        * `cancelled` - cancelled
    TokenRefresh:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
      required:
      - access
      - refresh
    TopCustomer:
      type: object
      description: Serializer for top customer data.
      properties:
        user_id:
          type: integer
        username:
          type: string
        order_count:
          type: integer
        total_spent:
          type: number
          format: double
      required:
      - order_count
      - total_spent
      - user_id
      - username
    User:
      type: object
      description: Serializer for user profile
      properties:
        id:
          type: integer
          readOnly: true
        username:
          type: string
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
        phone:
          type: string
          nullable: true
          maxLength: 15
        avatar:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        role:
          $ref: '#/components/schemas/RoleEnum'
        is_verified:
          type: boolean
          readOnly: true
      required:
      - id
      - is_verified
      - username
    UserMetrics:
      type: object
      description: Serializer for user metrics.
      properties:
        total_users:
          type: integer
        users_with_orders:
          type: integer
        active_users_30d:
          type: integer
        conversion_rate:
          type: number
          format: double
        top_customers:
          type: array
          items:
            $ref: '#/components/schemas/TopCustomer'
      required:
      - active_users_30d
      - conversion_rate
      - top_customers
      - total_users
      - users_with_orders
    VerifyOTP:
      type: object
      description: 'Serializer for OTP verification - Step 2: Verify code'
      properties:
        email:
          type: string
          format: email
        otp:
          type: string
          maxLength: 6
          minLength: 6
      required:
      - email
      - otp
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      name: X-API-Key
      in: header
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
servers:
- url: http://localhost:8000
  description: Local
- url: https://web-production-e1bea.up.railway.app
  description: Production
